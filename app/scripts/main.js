!function(){var a;this.ExhibitionController=a=function(a,b,c){a.noMoreKonograms=!1,a.konograms=[],a.promotionDate=function(a){var b,d;return b=c("date"),d="yyyy-MM-dd HH:mm:ss",null===a?"N/A":0===a.from&&2147483647===a.to?"???? ~ ????":0===a.from&&2147483647!==a.to?"???? ~ "+b(1e3*a.to,d):0!==a.from&&2147483647===a.to?b(1e3*a.from,d)+" ~ ????":b(1e3*a.from,d)+" ~ "+b(1e3*a.to,d)},a.$on("clear",function(){a.konograms=[],a.noMoreKonograms=!1}),a.$on("newKonograms",function(b,c){a.noMoreKonograms=c.length<10,angular.forEach(c,function(b){return a.konograms.push(b)})}),a.loadMore=function(){var c,d;a.noMoreKonograms||(c=a.konograms.length,d=c>0?a.konograms[c-1].id:null,b.$broadcast("loadMore",d))},a.isPromoting=function(a){var b;return null===a?!1:(b=(new Date).getTime()/1e3,a.from<=b&&b<=a.to)},a.copyArticleId=function(a){return b.$broadcast("articleId",a)}},a.$inject=["$scope","$rootScope","$filter"]}.call(this),function(){var a;this.NavbarController=a=function(a,b){var c;c=null,a.setEnv=function(a){c=a,b.$broadcast("clear"),b.$broadcast("envChanged",a)},a.getEnv=function(){return c},a.setEnv("production")},a.$inject=["$scope","$rootScope"]}.call(this),function(){var a;this.SearchController=a=function(a,b,c){var d,e,f,g,h,i,j;d={development:"http://yteam.thekono.com/KPI2/konograms",production:"http://www.thekono.com/KPI2/konograms"},e=d.production,a.kid="",a.dateSince=null,a.dateUntil=null,a.articleId="",a.chronological=!1,a.waitingResponse=!1,f=function(b,c){return e=d[c],a.articleId="",a.queryKonograms()},a.clear=function(){return b.$broadcast("clear")},a.queryKonograms=function(b){var d,f;return null==b&&(b=null),a.waitingResponse?void 0:(d={callback:"JSON_CALLBACK",promotion:1},""!==a.kid&&(d.owner=a.kid),f=new Date(a.dateSince).getTime()/1e3,!isNaN(f)&&f>0&&(d.from=f),f=new Date(a.dateUntil).getTime()/1e3,!isNaN(f)&&f>0&&(d.to=f),""!==a.articleId&&(d.article_id=a.articleId),a.chronological||(d.reverse=1),null!==b&&(d[a.chronological?"after":"before"]=b),g(),c.jsonp(e,{params:d}).success(i).error(j))},g=function(){return a.waitingResponse=!0},h=function(){return a.waitingResponse=!1},i=function(a){return h(),b.$broadcast("newKonograms",a)},j=function(){return h()},a.$on("envChanged",f),a.$on("loadMore",function(b,c){a.queryKonograms(c)}),a.$on("articleId",function(b,c){a.articleId=c,a.clear(),a.queryKonograms()})},a.$inject=["$scope","$rootScope","$http"]}.call(this);
